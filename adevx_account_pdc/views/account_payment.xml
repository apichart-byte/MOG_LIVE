<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">


        <record id="view_inherit_account_check_printing_form" model="ir.ui.view">
            <field name="name">view.inherit.account.check.printing.form</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account_check_printing.view_account_payment_form_inherited"/>
            <field name="arch" type="xml">

                <xpath expr="//button[@name='action_unmark_sent']" position="attributes">
                    <attribute name="invisible">
                        payment_method_code not in ['check_printing','pdc'] or not is_move_sent
                    </attribute>
                </xpath>
            </field>
        </record>

        <record id="view_account_payment_form_inherited" model="ir.ui.view">
            <field name="name">account.payment.form.inherited</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">

                <xpath expr="//div[@name='amount_div']" position="after">
                    <field name="check_amount_in_words"
                           invisible="payment_method_code not in ['check_printing','pdc']"
                           groups="base.group_no_one"/>
                </xpath>
                <xpath expr="//field[@name='payment_method_line_id']" position="after">
                    <field name="check_manual_sequencing" invisible="1"/>
                    <field name="show_check_number" invisible="1"/>
                    <field name="check_number" invisible="not show_check_number"/>
                </xpath>
                <xpath expr="//field[@name='date']" position="after">
                    <field name="effective_date"
                           invisible="payment_method_code != 'pdc'"
                           required="payment_method_code == 'pdc'"/>
                    <field name="bank_reference" readonly="state != 'draft'"/>
                    <field name="cheque_reference" readonly="state != 'draft'"/>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="account_check_printing.view_payment_check_printing_search" model="ir.ui.view">
            <field name="name">account.payment.check.printing.search</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_search"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='activities_overdue']" position="before">
                    <filter string="Checks To Print"
                            domain="[('payment_method_id.code', 'in', ['check_printing','pdc']), ('state', '=', 'posted'), ('is_move_sent', '=', False)]"
                            name="checks_to_send"/>
                </xpath>
            </field>
        </record>

    </data>
</odoo>