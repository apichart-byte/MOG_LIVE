# โมดูล Employee Advance

## สรุป Flow การทำงาน

### 1. การจัดการกล่องเบิกจ่ายกลาง (Advance Box)
- ระบบจะสร้าง Advance Box ให้กับแต่ละพนักงานเพื่อจัดเก็บเงินที่เบิกจ่าย
- สามารถตั้งค่าให้ Refill-to-Base ได้ (เติมเงินให้กลับไปยังฐานเงินที่กำหนด)
- แสดงยอดคงเหลือของกล่องเบิกจ่ายในเวลาปัจจุบัน

### 2. การเบิกเงินล่วงหน้าของพนักงาน (Employee Advance)
- พนักงานสามารถสร้างคำขอเบิกเงินล่วงหน้าผ่านเมนูใน Odoo
- ระบบจะบันทึกข้อมูลคำขอ เช่น จำนวนเงิน วัตถุประสงค์ และเอกสารแนบ (ถ้ามี)
- คำขอจะถูกส่งไปยังผู้จัดการเพื่อพิจารณาอนุมัติ

### 3. การอนุมัติคำขอ (Approval Process)
- ผู้จัดการจะได้รับแจ้งเตือนเมื่อมีคำขอใหม่เข้ามา
- ผู้จัดการสามารถพิจารณาอนุมัติหรือปฏิเสธคำขอ
- หากอนุมัติ ระบบจะดำเนินการจ่ายเงินให้พนักงานตามขั้นตอนที่กำหนด

### 4. การจัดการทางบัญชี (Accounting Integration)
- ระบบจะสร้าง Journal Entry เพื่อบันทึกการจ่ายเงินล่วงหน้า
- บัญชีของพนักงานจะถูกตั้งเป็นผู้หนี้ (Debtor) ตามจำนวนเงินที่เบิก
- ระบบรองรับการหัก ณ ที่จ่าย (Withholding Tax - WHT) ตามข้อกำหนด

### 5. การจัดการค่าใช้จ่าย (Expense Management)
- เมื่อพนักงานใช้เงินที่เบิกมาแล้ว ต้องสร้างเอกสารค่าใช้จ่ายเพื่อชดใช้
- ระบบสามารถเชื่อมโยงกับเอกสารค่าใช้จ่ายอื่น ๆ ได้
- สามารถตั้งค่าให้ระบบแยกค่าใช้จ่ายตามช่วงเวลา (date grouping) ได้
- ระบบจะสร้าง Vendor Bill draft หลังจากได้รับการอนุมัติ

### 6. การตัดหนี้ (Reconciliation)
- ระบบจะสร้าง Journal Entry เพื่อตัดหนี้แทนการเปิดหน้าต่าง Register Payment
- ระบบสามารถตัดหนี้โดยใช้ Advance Box ของพนักงาน
- สามารถทำ Clear Advance ด้วย WHT ได้ (มีการสร้าง WHT Certificate)
- มีการเชื่อมโยงกับ WHT Certificate สำหรับการรายงาน

### 7. การจัดการคู่ค้า (Vendor Management)
- สามารถระบุ Vendor สำหรับแต่ละรายการค่าใช้จ่ายได้
- ระบบสามารถแยก Vendor Bills ตามคู่ค้าและวันที่ได้
- ใช้ Auto Mode สำหรับแยก Bill อัตโนมัติตามคู่ค้าที่ระบุ

### 8. การตั้งค่า (Configuration)
- สามารถตั้งค่าผู้ใช้/กลุ่มที่ต้องได้รับแจ้งเตือน
- ตั้งค่าประเภทกิจกรรมและวันครบกำหนด
- ตั้งค่า Journal สำหรับการตัดหนี้

### 9. การชำระเงิน (Payment Management)
- สามารถชำระเงินด้วย Advance ได้
- ใช้ Wizard สำหรับ Advance Refill และ Clear Advance
- มีการจัดการเชื่อมโยงกับ Advance Box

### 10. การตรวจสอบ (Verification)
- สามารถตรวจสอบค่าใช้จ่ายที่ชำระแล้ว
- สามารถเปิดใช้งานการตรวจสอบด้วย WHT
- แสดงจำนวน WHT Certificate ที่เกี่ยวข้อง

## คุณลักษณะเด่น
- รองรับการหัก ณ ที่จ่าย (WHT) แบบยืดหยุ่น
- การจัดการค่าใช้จ่ายที่เชื่อมโยงกับการเบิกเงินล่วงหน้า
- ระบบตัดหนี้อัตโนมัติเพื่อความแม่นยำ
- รองรับการจัดกลุ่มตามวันที่สำหรับการประมวลผลรวม
- บูรณาการกับระบบบัญชีของ Odoo อย่างสมบูรณ์
- แยก Vendor Bills ตามคู่ค้าและวันที่ได้
- ใช้ Auto Mode สำหรับแยก Bill อัตโนมัติ
- แสดงจำนวน WHT Certificate ที่เกี่ยวข้อง

## การติดตั้ง
1. วางโมดูลในไดเรกทอรี `custom-addons`
2. อัปเดตรายการโมดูลใน Odoo
3. ติดตั้งโมดูล `employee_advance`

## หมายเหตุ
- ต้องตั้งค่าบัญชีที่เกี่ยวข้องก่อนใช้งาน
- ต้องกำหนดสิทธิ์การเข้าถึงให้ผู้ใช้งานแต่ละรายอย่างเหมาะสม